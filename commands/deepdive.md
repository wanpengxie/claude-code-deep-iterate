# 探索式迭代思考（Deep Iterative Thinking）

> **Author**: wanpeng.xie@gmail.com

当用户要求"探索式迭代思考"、"深度迭代"、"非线性迭代思考"时，你必须按照以下流程严格执行。

---

## 第零步：理解问题（MANDATORY - 必须执行）

在开始任何思考之前，你必须：

### 1. 理解问题本身
- 用户问的到底是什么？
- 问题的真实意图是什么？
- 有哪些隐含的假设？

### 2. 理解问题的环境
- 这个问题在什么上下文中？
- 涉及哪些已有的设计和决策？
- 与哪些其他部分相关？
- 其他对象/问题的相互作用

### 3. 理解问题的更高维度
- 这个问题背后的本质问题是什么？
- 是否有更抽象的视角？
- 是否有更简单的问题陈述？


**如果对问题理解不清晰，必须先使用AskUserQuestion工具澄清，然后再继续。**

> 注意：真正深刻的想法不是解决问题，而是改变我们思考问题的方式。
---

## 第一步：建立探索性TODO（MANDATORY）

使用`TodoWrite`工具建立TODO list，必须包含：

### 最小要求：至少5个TODO项

### TODO类型分布：
1. **困惑类**（至少1个）：记录当前的困惑点
   - 示例："困惑：XX到底是什么意思？"

2. **探索类**（至少2个）：从不同角度探索
   - 示例："探索A：从YY角度理解"
   - 示例："探索B：从ZZ角度对比"

3. **验证类**（至少1个）：用反例或案例验证
   - 示例："反例验证：如果不XX会怎样？"
   - 示例："案例验证：用具体场景测试"

4. **动态类**（可选）：根据探索发现动态添加

### 禁止的TODO模式：
- ❌ 线性步骤："第一步...第二步...第三步..."
- ❌ 预设答案："验证XX方案的可行性"（已经假设了XX）
- ❌ 纯技术执行："实现XX功能"

### 正确的TODO示例：
```
- 困惑：用户说的"打扰"和"价值"的平衡点到底在哪？
- 探索A：从用户使用场景理解通知的必要性
- 探索B：从产品目标理解通知的分类逻辑
- 反例验证：如果不做分类会怎样？用户会如何反应？
- 深入追问：为什么通知系统需要这样设计？
```

---

## 第二步：执行真实迭代（MANDATORY）

### 核心原则：真实思考，而非表演思考

### 执行规则：

#### 1. 逐个TODO执行
- 开始一个TODO时，立即用`TodoWrite`标记为`in_progress`
- 完成一个TODO时，立即用`TodoWrite`标记为`completed`
- **禁止**一次完成多个TODO后再批量更新

#### 2. 展示真实思考过程
```markdown
## 探索A：从XX角度

尝试1：...
发现问题：...
尝试2：...
新的困惑：...

等等，这个理解是错的！
因为...
需要重新思考...
```

#### 3. 允许并鼓励推翻
- 发现理解错误时，立即承认并推翻
- 不要为错误的方向辩护
- 添加新TODO记录需要重新探索的方向

#### 4. 持续追问本质（融合讨论原则）
- 不要停留在表面
- 每个发现都追问"为什么"
- 寻找更抽象、更本质的理解
- 用具体案例验证抽象理解

#### 5. 多角度验证
- **典型案例**：用正常情况验证
- **反例**：用极端情况验证
- **异常示例**：用边界情况验证
- 验证思考是否完备

#### 6. 动态调整TODO
- 发现新问题 → 立即添加新TODO
- 发现TODO无意义 → 删除并解释原因
- 发现需要后退 → 修改TODO状态

### 最小迭代轮次：3轮

即使问题看似简单，也必须至少进行3轮探索：
1. 第一轮：初步理解
2. 第二轮：深化/挑战第一轮的理解
3. 第三轮：综合验证

---

## 第三步：案例验证（MANDATORY）

得出初步结论后，必须用完整的案例场景验证：

### 验证要求：
1. **构造完整场景**：不是简单举例，而是完整的使用场景
2. **模拟实际使用**：假设真实用户在实际使用中会怎样
3. **检查是否有效**：能否支撑实际需求
4. **寻找漏洞**：尝试找出方案的问题

### 如果验证失败：
- 不要修补，要回退重新思考
- 添加新TODO记录问题
- 可能需要推翻整个方向

---

## 第四步：总结和记录（MANDATORY）

### 总结必须包含：

1. **最终结论**
   - 清晰陈述结论
   - 标注完成度（如果未完成100%）

2. **关键洞察**
   - 最重要的发现是什么
   - 哪些理解是关键的

3. **被推翻的假设**
   - 哪些想法被证明是错的
   - 为什么错了
   - 这对未来有什么启示

4. **迭代关键转折点**
   - 哪些时刻发生了重要转变
   - 为什么会转变

5. **待解决的问题**
   - 还有哪些问题没解决
   - 下一步应该做什么

---

## 融合的讨论原则

### 核心原则：

#### 1. 思考的维度
- ✅ 总是思考上下文和更高维度
- ✅ 深度思考，不浮于表面
- ✅ 从抽象本质和具体案例两个角度试探
- ✅ 寻找common反例验证完备性
- ✅ 关注本质问题，而非技术细节

#### 2. 避免过早收敛
- ✅ 不急于给出解决方案
- ✅ 充分思考、理解、讨论
- ✅ 不要成为第一个方案的奴隶

#### 3. 设计哲学
- ✅ 让LLM做它擅长的事
- ✅ 不过度结构化
- ✅ 简单结构、复杂处理

---

## 必须使用的工具

### TodoWrite（必须）
- 建立TODO list
- 实时更新状态
- 动态添加/删除TODO

### AskUserQuestion（当需要时）
- 问题理解不清时
- 发现多个可行方向需要选择时
- 遇到关键决策点需要确认时

---

## 检查清单

在每个阶段结束时，问自己：

### 理解问题阶段：
- [ ] 我真的理解用户问的是什么吗？
- [ ] 我理解问题的环境和上下文了吗？
- [ ] 我找到更本质的问题陈述了吗？

### 执行迭代阶段：
- [ ] 我在真实思考还是在表演？
- [ ] 我允许自己困惑了吗？
- [ ] 我敢推翻自己的想法吗？
- [ ] 我至少做了3轮迭代吗？
- [ ] 我用了典型案例、反例、异常示例验证吗？

### 验证阶段：
- [ ] 我用完整场景验证了吗？
- [ ] 验证真的有效还是只是自我安慰？
- [ ] 我尝试找漏洞了吗？

### 总结阶段：
- [ ] 我记录了被推翻的假设吗？
- [ ] 我承认未完成的部分了吗？
- [ ] 我明确了下一步方向吗？

---

## 常见错误警示

### 错误1：假装迭代
**表现**：写"第一轮...第二轮...第三轮..."，但实际是一次性写完的
**识别**：所有轮次都是线性推进，没有真正的后退和推翻
**后果**：思考质量低，结论不可靠

### 错误2：过早收敛
**表现**：快速给出"完美"框架，看起来很专业
**识别**：没有困惑、没有矛盾、太过"合理"
**后果**：可能错过真正的本质，设计出监控系统而非生命

### 错误3：忽略环境
**表现**：孤立地思考问题，不考虑上下文
**识别**：没有提及相关的已有设计、没有对比其他模块
**后果**：设计不协调，违背整体架构

### 错误4：停留在表面
**表现**：只回答"是什么"，不追问"为什么"
**识别**：没有深入本质，缺少抽象理解
**后果**：理解不深刻，无法指导设计

---

## 成功案例参考

### 案例：通知系统的分类设计

**问题**：我们的产品需要设计通知系统，应该如何分类和设置优先级？

**执行过程**：
1. ✅ 理解问题：先搞清楚"通知"的本质是什么
2. ✅ 建立TODO：困惑、多角度探索、反例验证
3. ✅ 真实迭代：
   - 探索按内容分类 → 发现类别太多，用户难理解
   - 尝试按重要性分类 → 发现主观性太强，无法统一标准
   - 反思"用户场景"原则 → 找到按"用户行为响应紧急度"分类的思路
4. ✅ 多次推翻：至少3次重大方向调整
5. ✅ 案例验证：用"好友申请"、"系统维护"、"内容推荐"等场景完整验证
6. ✅ 诚实总结：承认边界场景（如活动通知）仍需进一步讨论

**结果**：得到三级分类方案（即时/当日/可延迟），明确了待解决的边界问题

---

## 何时使用此模式

### 应该使用：
- 复杂的设计问题（没有明确答案）
- 需要深度理解本质的问题
- 涉及多个维度和权衡的决策
- 系统架构设计

### 不应使用：
- 简单的实现问题（已有明确方案）
- 纯信息查询（不需要设计决策）
- 紧急问题修复（需要快速解决）

---

## 触发关键词

当用户说出以下词语时，自动启用此模式：
- "探索式迭代思考"
- "深度迭代"
- "非线性迭代"
- "深入思考这个问题"
- "不要急于给结论"
- "多角度迭代"

---

**核心理念**：理解问题 → 真实探索 → 深入本质 → 诚实总结

**最高原则**：真实的思考，而非表演的迭代。
